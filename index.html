<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Kaboom Testing</title>
	</head>

	<body></body>

	<script type="module">
		// Importar como modulo
		import kaboom from 'https://unpkg.com/kaboom/dist/kaboom.mjs';

		// Inicializar contexto de Kaboom
		kaboom();

		// * CARGAR SPRITES
		loadSprite('spot', 'sprites/spot.png');
		loadSprite('crab', 'sprites/crab.png');

		// * ESCENA DEL JUEGO INICIAL
		scene('game', () => {
			// * COOLSPOT
			const coolSpot = add([sprite('spot'), pos(80, 40), area(), scale(2), body({ jumpForce: 1024 })]);
			keyPress('space', () => {
				if (coolSpot.grounded()) {
					coolSpot.jump();
				}
			});
			coolSpot.collides('crab', () => {
				addKaboom(coolSpot.pos);
				shake();
			});

			// * SUELO
			add([rect(width() + 32, 48 + 32), pos(-32, height() - 48), area(), solid(), color(255, 229, 204)]);

			// * CANGREJOS
			const spawnCrab = () => {
				add([sprite('crab'), scale(2), area(), pos(width(), height() - 48), origin('botleft'), move(LEFT, 240), 'crab']);

				wait(rand(1, 3), () => {
					spawnCrab();
				});
			};
			spawnCrab();
		});

		go('game');
	</script>
</html>
